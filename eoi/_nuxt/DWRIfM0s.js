import{d as oe,s as ne,b as le,R as se,S as ae,T as ie,U as ce,c as r,V as re,D as x,y as Y,u as s,o as c,w as $,W as U,X as ue,r as de,Y as Ce,Z as z,v as G,$ as y,a0 as S,a1 as ke,k as D,a as l,g as w,z as f,a2 as L,A as ve,t as u,a3 as fe,F as O,B as P,C as pe,a4 as E,f as T,J as _e,a5 as be}from"#entry";const me=Symbol.for("nuxt:client-only"),ge=oe({name:"ClientOnly",inheritAttrs:!1,props:["fallback","placeholder","placeholderTag","fallbackTag"],setup(a,{slots:_,attrs:p}){const b=ne(!1);le(()=>{b.value=!0});const v=se();return v&&(v._nuxtClientOnly=!0),ae(me,!0),()=>{if(b.value){const m=_.default?.();return m&&m.length===1?[ie(m[0],p)]:m}const d=_.fallback||_.placeholder;if(d)return ce(d);const o=a.fallback||a.placeholder||"",M=a.fallbackTag||a.placeholderTag||"span";return r(M,p,o)}}}),ye={__name:"CookieClientOnlyPrerender",setup(a){const p=re().public.cookieControl._isPrerendered;return(b,v)=>{const d=ge;return s(p)?(c(),Y(d,{key:1},{default:$(()=>[x(b.$slots,"default")]),_:3})):x(b.$slots,"default",{key:0})}}};function xe(a){for(const _ in a)document.documentElement.style.setProperty(`--${_}`,a[_]??null)}var I=(a=>(a.NECESSARY="necessary",a.OPTIONAL="optional",a))(I||{});const he=()=>U().$cookies,Oe={class:"cookieControl"},Ee={class:"cookieControl__BarContainer"},$e=["textContent"],Ie=["textContent"],Me={class:"cookieControl__BarButtons"},Ne=["textContent"],Ae=["textContent"],Be=["textContent"],Se=["textContent"],De={class:"cookieControl__ModalContent"},we={class:"cookieControl__ModalContentInner"},Pe=["textContent"],Te=["textContent"],Ve={class:"cookieControl__ModalInputWrapper"},Re=["id"],Fe=["id","checked","onChange"],je=["for"],ze={key:0},Ge={key:1},Le={class:"cookieControl__ModalButtons"},Ye=["textContent"],Ue=["textContent"],We=["textContent"],Je={__name:"CookieControl",props:ue({locale:{type:String,required:!1}},{locale:"en"}),setup(a,{expose:_}){const{cookiesEnabled:p,cookiesEnabledIds:b,isConsentGiven:v,isModalActive:d,moduleOptions:o}=he(),M=U(),m=new Date(Date.now()+o.cookieExpiryOffsetMs),W=o.cookies[I.OPTIONAL].filter(t=>t.isPreselected),g=de([...p.value||(v.value===void 0?W:[])]),q=Ce(o),V=z(o.cookieNameIsConsentGiven,{expires:m,...o.cookieOptions}),R=z(o.cookieNameCookiesEnabledIds,{expires:m,...o.cookieOptions}),K=G(()=>y(p.value||[]).sort().join(S)!==y(g.value).sort().join(S)),k=G(()=>o.localeTexts[a.locale]),A=()=>{N({cookiesOptionalEnabled:o.cookies.optional,isConsentGiven:!0})},F=()=>{const t=y(g.value);N({cookiesOptionalEnabled:o.cookies.optional.filter(e=>t.includes(e.id)),isConsentGiven:!0})},B=()=>{N({cookiesOptionalEnabled:[],isConsentGiven:!0})},J=()=>{N({cookiesOptionalEnabled:[],isConsentGiven:!1})},X=t=>`${o.isDashInDescriptionEnabled===!1?"":"-"} ${E(t,a.locale)}`,j=t=>t==="functional"?k.value?.cookiesFunctional:E(t,a.locale),Z=()=>{M.$cookies.locale.value=a.locale},H=()=>{o.closeModalOnClickOutside&&(d.value=!1)},N=({cookiesOptionalEnabled:t,isConsentGiven:e})=>{v.value=e,p.value=e?[...o.cookies.necessary,...o.cookies.optional.filter(h=>t.includes(h))]:[],b.value=e?y(p.value):[]},Q=t=>{t.target?.nextSibling?.click()},ee=t=>{const e=y(g.value).indexOf(t.id);e<0?g.value.push(t):g.value.splice(e,1)},te=t=>{t.key===" "&&t.target?.click()};return ke(()=>{if(o.colors){const t={};for(const e in o.colors)t[`cookie-control-${e}`]=`${o.colors[e]}`;xe(t)}o.isModalForced&&!v.value&&(d.value=!0)}),D(()=>p.value,(t,e)=>{if(g.value=[...t||[]],v.value){R.value=y(t||[]).join(S);for(const i of t||[]){if(!i.src)continue;const n=document.createElement("script");n.src=i.src;const C=document.getElementsByTagName("head")[0];if(!C)return;C.appendChild(n)}}else R.value=void 0;const h=o.cookies.optional.filter(i=>!(t||[]).includes(i));for(const i of h)if(i.targetCookieIds){for(const n of i.targetCookieIds)be(n);if(i.src)for(const n of[...document.head.querySelectorAll(`script[src="${i.src}"]`)])n.parentNode?.removeChild(n)}},{deep:!0}),D(v,(t,e)=>{t===void 0?V.value=void 0:V.value=t?q:"0"}),D(()=>a.locale,t=>{M.$cookies.locale.value=t}),Z(),_({accept:A,acceptPartial:F,decline:B}),(t,e)=>{const h=_e;return c(),Y(ye,null,{default:$(()=>[l("aside",Oe,[w(L,{name:`cookieControl__Bar--${s(o).barPosition}`},{default:$(()=>[!s(v)&&!s(o).isModalForced?(c(),r("div",{key:0,class:ve(`cookieControl__Bar cookieControl__Bar--${s(o).barPosition}`)},[l("div",Ee,[l("div",null,[x(t.$slots,"bar",{},()=>[l("h2",{textContent:u(k.value?.bannerTitle)},null,8,$e),l("p",{textContent:u(k.value?.bannerDescription)},null,8,Ie)])]),l("div",Me,[l("button",{type:"button",onClick:e[0]||(e[0]=i=>A()),textContent:u(k.value?.accept)},null,8,Ne),s(o).isAcceptNecessaryButtonEnabled?(c(),r("button",{key:0,type:"button",onClick:e[1]||(e[1]=i=>B()),textContent:u(k.value?.decline)},null,8,Ae)):f("",!0),l("button",{type:"button",onClick:e[2]||(e[2]=i=>d.value=!0),textContent:u(k.value?.manageCookies)},null,8,Be)])])],2)):f("",!0)]),_:3},8,["name"]),s(o).isControlButtonEnabled&&s(v)?(c(),r("button",{key:0,"aria-label":"Cookie control",class:"cookieControl__ControlButton","data-testid":"nuxt-cookie-control-control-button",type:"button",onClick:e[3]||(e[3]=i=>d.value=!0)},[x(t.$slots,"controlButton",{},()=>[e[10]||(e[10]=l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},[l("path",{fill:"currentColor",d:"M510.52 255.82c-69.97-.85-126.47-57.69-126.47-127.86-70.17 0-127-56.49-127.86-126.45-27.26-4.14-55.13.3-79.72 12.82l-69.13 35.22a132.221 132.221 0 00-57.79 57.81l-35.1 68.88a132.645 132.645 0 00-12.82 80.95l12.08 76.27a132.521 132.521 0 0037.16 72.96l54.77 54.76a132.036 132.036 0 0072.71 37.06l76.71 12.15c27.51 4.36 55.7-.11 80.53-12.76l69.13-35.21a132.273 132.273 0 0057.79-57.81l35.1-68.88c12.56-24.64 17.01-52.58 12.91-79.91zM176 368c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32zm32-160c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32zm160 128c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32z"})],-1))])])):f("",!0),w(L,{name:"cookieControl__Modal"},{default:$(()=>[s(d)?(c(),r("div",{key:0,class:"cookieControl__Modal",onClick:fe(H,["self"])},[K.value?(c(),r("p",{key:0,class:"cookieControl__ModalUnsaved",textContent:u(k.value?.settingsUnsaved)},null,8,Se)):f("",!0),l("div",De,[l("div",we,[x(t.$slots,"modal"),s(o).isModalForced?f("",!0):(c(),r("button",{key:0,class:"cookieControl__ModalClose",type:"button",onClick:e[4]||(e[4]=i=>d.value=!1),textContent:u(k.value?.close)},null,8,Pe)),(c(!0),r(O,null,P(s(I),i=>(c(),r(O,{key:i},[s(o).cookies[i].length?(c(),r(O,{key:0},[l("h2",{textContent:u(k.value&&(i===s(I).NECESSARY?k.value.cookiesNecessary:k.value.cookiesOptional))},null,8,Te),l("ul",null,[(c(!0),r(O,null,P(s(o).cookies[i],n=>(c(),r("li",{key:n.id},[x(t.$slots,"cookie",pe({ref_for:!0},{cookie:n}),()=>[l("div",Ve,[i===s(I).NECESSARY&&n.name!=="functional"?(c(),r("input",{key:0,id:s(E)(n.name,a.locale),type:"checkbox",disabled:"",checked:""},null,8,Re)):(c(),r("input",{key:1,id:s(E)(n.name,a.locale),type:"checkbox",checked:s(y)(g.value).includes(n.id),onChange:C=>ee(n)},null,40,Fe)),l("button",{type:"button",onClick:e[5]||(e[5]=C=>Q(C))},u(j(n.name)),1),l("label",{class:"cookieControl__ModalCookieName",for:s(E)(n.name,a.locale),tabindex:"0",onKeydown:e[6]||(e[6]=C=>te(C))},[T(u(j(n.name))+" ",1),n.description?(c(),r("span",ze,u(X(n.description)),1)):f("",!0),s(o).isCookieIdVisible&&n.targetCookieIds?(c(),r("span",Ge,[e[11]||(e[11]=l("br",null,null,-1)),T(" "+u("IDs: "+n.targetCookieIds.map(C=>`"${C}"`).join(", ")),1)])):f("",!0),Object.entries(n.links||{}).length?(c(!0),r(O,{key:2},P(Object.entries(n.links||{}),C=>(c(),r("span",{key:C[0]},[e[12]||(e[12]=l("br",null,null,-1)),w(h,{to:C[0],onClick:qe=>C[0].toLowerCase().startsWith("http")?null:d.value=!1},{default:$(()=>[T(u(C[1]||C[0]),1)]),_:2},1032,["to","onClick"])]))),128)):f("",!0)],40,je)])])]))),128))])],64)):f("",!0)],64))),128)),l("div",Le,[l("button",{type:"button",onClick:e[7]||(e[7]=()=>{F(),d.value=!1}),textContent:u(k.value?.save)},null,8,Ye),l("button",{type:"button",onClick:e[8]||(e[8]=()=>{A(),d.value=!1}),textContent:u(k.value?.acceptAll)},null,8,Ue),s(o).isModalForced?f("",!0):(c(),r("button",{key:0,type:"button",onClick:e[9]||(e[9]=()=>{s(o).declineAllAcceptsNecessary?B():J(),d.value=!1}),textContent:u(k.value?.declineAll)},null,8,We))])])])])):f("",!0)]),_:3})])]),_:3})}}};export{Je as _};
